## Next.js란?

리액트의 서버 사이드 렌더링 프레임워크다.

<br/>

## 서버사이드렌더링(SSR)과 클라이언트사이드렌더링(CSR)

CSR(Client Side Rendering): 최초 한 번 전체 페이지를 로딩함(거의 빈화면으로 시작). 이후는 필요한 정보(리소스)만 서버에 요청, 받은 값을 클라이언트에서 해석하고 렌더링하는 방법이다.

CSR의 경우 첫화면 로딩이 굉장히 빠르게 뜬다. 
일단 빈 화면을 보여준 다음 각 항목에 따라 각각 리소스를 호출, 렌더링하는 방법을 쓰기 때문이다. 

때문에 초기 로딩속도를 조절할 수 있다(오래 걸리는 요청을 따로 분리, 제거가 가능). 

그러나 이게 단점이 되기도 하는데, 페이지를 읽어들이는 시간, 자바스크립트를 읽는 시간, 자바스크립트가 화면을 그리는 시간 모두 마쳐야 콘텐츠가 노출되기 때문이다.

SSR은 이와 대조적이다. 

처음 로딩하기 전에 필요한 데이터에 한해 미리 서버에서 받아둔 다음 관련된 view를 모두 랜더링하여 리턴하기 때문에 자원 호출의 종류에 따라, 그리고 갯수에 따라 초기화면 로딩시간에 영향을 받을 수 있다.

또한 중요한 차이가 있는데, 웹 크롤러들은 대부분 처음 html을 호출하여 보이는 값을 크롤링 한다. 

CSR의 경우 첫화면을 먼저 보여주고 리소스를 가져오는 방식으로 하기 때문에 빈페이지가 크롤링 된다. 

이는 검색엔진 노출에 불리한 방법이다. 

구글은 CSR이라 하더라도 모두 호출된 후에 수집한다 하는데 반해 네이버나 다음 등의 다른 검색엔진은 그렇지 못한다고 한다. 

반대로 SSR의 경우 서버에서 전부 렌더링하여 내려주기 때문에 방금의 문제와는 관련 없다.

<br/>

## 프레임워크를 쓰려는 이유

SSR을 직접 구현하려면 어렵고 복잡한데 프레임워크를 사용하면 간단하다.

## Next.js 장점 및 사용 이유

- 검색 엔진 최적화

- 라우칭

- 코드 스플릿팅: 코드를 분리하는 것, 한 페이지에 많은 코드를 담는 것보다는 코드를 목적에 따라 분리하여 필요할때마다 호출하게끔 하는 것이다. 불필요한 코드는 호출하지 않기 때문에 페이지 로딩속도 개선효과가 있다.

<br/>

## next.js를 통해 보는 SSR Cycle


1. Frontend Server에서 GET 요청을 받는다

2. 요청에 맞는 page를 찾는다

3. _app.js(next.js 사용시 최초로 실행되는 파일)의 getInitialProps가 있다면 실행

4. Page Component 안에 getInitialProps가 있다면 실행

5. _document.js의 getInitialProps가 있다면 실행

6. 모든 props를 구성하고 _app.js > Page Component 순으로 렌더링

7. 모든 콘텐츠를 구성하고 _document.js를 실행하여 html형태로 출력
